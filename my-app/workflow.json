{"data":{"id":"p_brC6x3W","name":"Gmail receive","active":false,"steps":[{"id":"c_n7f9jEdO","type":"CodeCell","namespace":"code","disabled":false,"code_raw":null,"codeRaw":null,"codeConfigJson":null,"lang":"nodejs20.x","text_raw":null,"appConnections":[],"flat_params_visibility_json":null,"params_json":"{}","component":true,"savedComponent":{"id":"sc_6QibbzdN","code":"import { axios } from \"@pipedream/platform\";\n\nexport default defineComponent({\n  props: {\n    userId: {\n      type: \"string\",\n      description: \"User ID for this workflow\"\n    },\n    gmailAccountId: {\n      type: \"string\", \n      description: \"Gmail account ID\"\n    },\n    userEmail: {\n      type: \"string\",\n      description: \"User's email address\"\n    },\n    lambdaUrl: {\n      type: \"string\",\n      default: \"https://22y6e3kow4ozzkerpbd6shyxoi0hbcxx.lambda-url.us-east-1.on.aws/\"\n    }\n  },\n  async run({ steps, $ }) {\n    // Get the Gmail data from the webhook trigger\n    const gmailData = steps.trigger.event.body.gmail_data;\n    \n    if (!gmailData) {\n      throw new Error(\"No Gmail data found in trigger event\");\n    }\n    \n    // Forward the Gmail data to Beya's email processor\n    // The Lambda expects the gmail_data in the body along with user info\n    const response = await axios($, {\n      method: \"POST\",\n      url: this.lambdaUrl,\n      data: {\n        userId: this.userId,\n        gmail_account_id: this.gmailAccountId,\n        email: this.userEmail,\n        gmail_data: gmailData\n      },\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    \n    $.export(\"$summary\", `Forwarded Gmail data to Beya processor for ${this.userEmail}`);\n    return response;\n  },\n});","codeHash":"64dfb8f7716a0810d05b9a57d0f79945a6113f245411df81b0aae2ec3e841469","configurableProps":[{"name":"userId","type":"string","description":"User ID for this workflow"},{"name":"gmailAccountId","type":"string","description":"Gmail account ID"},{"name":"userEmail","type":"string","description":"User's email address"},{"name":"lambdaUrl","type":"string","default":"https://22y6e3kow4ozzkerpbd6shyxoi0hbcxx.lambda-url.us-east-1.on.aws/"}],"key":null,"description":null,"entryPath":null,"version":"","apps":[]},"component_key":null,"component_owner_id":null,"configured_props_json":null,"authProvisionIdMap":{},"authProvisionIds":[]}],"triggers":[{"id":"hi_nlH144J","key":"eoymqsx1st3xpz3","endpoint_url":"https://eoymqsx1st3xpz3.m.pipedream.net","custom_response":false,"created_at":1751141779,"updated_at":1751141779}]}}